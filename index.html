<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.dist.css">
</head>

<body class="py-12">
    <div class="container">
        <div class="prose">
            <h1>Infinite Scroll</h1>
        </div>
    </div>

    <div class="w-full mt-4 overflow-hidden bg-blue-200 slides-wrapper">
        <div class="inline-flex slides">
            <div
                class="inline-flex items-center justify-center w-48 h-48 text-3xl font-bold text-white bg-pink-500 rounded-full slides__item">
                1
            </div>
            <div
                class="inline-flex items-center justify-center w-48 h-48 text-3xl font-bold text-white bg-pink-500 rounded-full slides__item">
                2
            </div>
            <div
                class="inline-flex items-center justify-center w-48 h-48 text-3xl font-bold text-white bg-pink-500 rounded-full slides__item">
                3
            </div>
        </div>
    </div>

    <script>
        const slides = document.querySelector('.slides');
        const wrapper = document.querySelector('.slides-wrapper');

        function cloneUntilFull(slides, wrapper) {
            let slidesWidth = slides.offsetWidth;
            let wrapperWidth = wrapper.offsetWidth;
            let i = 0;

            while (slidesWidth < wrapperWidth) {
                cloneSlide(i);
                slidesWidth = document.querySelector('.slides').offsetWidth;
                i++
            }
        }

        function cloneSlide(slideNumber) {
            const items = document.querySelectorAll('.slides__item');
            const itemToCopy = items[slideNumber];
            const lastItem = items[items.length - 1];
            const clone = itemToCopy.cloneNode(true);
            lastItem.after(clone);
        }

        const ro = new ResizeObserver(entries => {
            for (let entry of entries) {
                cloneUntilFull(slides, wrapper);
            }
        });

        ro.observe(wrapper);

    </script>

    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
</body>

</html>
